<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />

        <!-- Compiled and minified CSS -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
        />
        <link
            href="https://fonts.googleapis.com/icon?family=Material+Icons"
            rel="stylesheet"
        />
        <title>Agile Stories</title>
    </head>
    <body class="grey lighten-3">
        <!-- NAVBAR -->
        <nav class="z-depth-0 grey lighten-4">
            <div class="nav-wrapper container">
                <a href="#" class="brand-logo">
                    <img
                        src="img/logo.png"
                        style="width: 180px; margin-top: 10px;"
                    />
                </a>
                <a href="#" data-target="mobile-demo" class="sidenav-trigger"
                    ><i class="material-icons" style="color: black;">menu</i></a
                >
                <ul id="nav-mobile" class="right hide-on-med-and-down">
                    <li class="logged-in" style="display: none;">
                        <a
                            href="#"
                            class="grey-text modal-trigger"
                            data-target="modal-account"
                            >Account</a
                        >
                    </li>
                    <li class="logged-in" style="display: none;">
                        <a href="#" class="grey-text" id="logout">Logout</a>
                    </li>
                    <li class="admin" style="display: none;">
                        <a
                            href="#"
                            class="grey-text modal-trigger"
                            data-target="modal-new-project"
                            >New Project</a
                        >
                    </li>
                    <li class="logged-out" style="display: none;">
                        <a
                            href="#"
                            class="grey-text modal-trigger"
                            data-target="modal-login"
                            >Login</a
                        >
                    </li>
                    <li class="logged-out" style="display: none;">
                        <a
                            href="#"
                            class="grey-text modal-trigger"
                            data-target="modal-signup"
                            >Sign up</a
                        >
                    </li>
                </ul>
            </div>
        </nav>

        <ul class="sidenav" id="mobile-demo">
            <li>
                <div style="margin-top: 8px; margin-left: 8px;">
                    <a href="#"> <img src="img/logo.png" /></a>
                </div>
            </li>
            <li><div class="divider"></div></li>
            <li class="admin" style="display: none;">
                <a
                    href="#"
                    class="grey-text modal-trigger"
                    data-target="modal-new-project"
                    >New Project</a
                >
            </li>
            <li class="logged-out" style="display: none;">
                <a
                    href="#"
                    class="grey-text modal-trigger"
                    data-target="modal-login"
                    >Login</a
                >
            </li>
            <li class="logged-out" style="display: none;">
                <a
                    href="#"
                    class="grey-text modal-trigger"
                    data-target="modal-signup"
                    >Sign up</a
                >
            </li>
            <li class="logged-in" style="display: none;">
                <a
                    href="#"
                    class="grey-text modal-trigger"
                    data-target="modal-account"
                    >Account</a
                >
            </li>
            <li class="logged-in" style="display: none;">
                <a href="#" class="grey-text" id="logout">Logout</a>
            </li>
        </ul>

        <!-- TODO : move this to separate page with all other admin actions -->
        <!-- ADMIN ACTIONS -->
        <!-- <form
            class="center-align admin-actions admin"
            style="margin: 40px auto; max-width: 300px; display: none;"
        >
            <input
                type="email"
                placeholder="User email"
                id="admin-email"
                required
            />
            <button class="btn-small yellow darken-2 z-depth-0">
                Make admin
            </button>
        </form> -->

        <!-- SIGN UP MODAL -->
        <div id="modal-signup" class="modal">
            <div class="modal-content">
                <h4>Sign up</h4>
                <br />
                <form id="signup-form">
                    <div class="input-field">
                        <input type="email" id="signup-email" required />
                        <label for="signup-email">Email address</label>
                    </div>
                    <div class="input-field">
                        <input type="password" id="signup-password" required />
                        <label for="signup-password">Choose password</label>
                    </div>
                    <div class="input-field">
                        <input type="text" id="signup-bio" required />
                        <label for="signup-bio">One Line Bio</label>
                    </div>
                    <button class="btn yellow darken-2 z-depth-0">
                        Sign up
                    </button>
                    <p class="error pink-text center-align"></p>
                </form>
            </div>
        </div>

        <!-- LOGIN MODAL -->
        <div id="modal-login" class="modal">
            <div class="modal-content">
                <h4>Login</h4>
                <br />
                <form id="login-form">
                    <div class="input-field">
                        <input type="email" id="login-email" required />
                        <label for="login-email">Email address</label>
                    </div>
                    <div class="input-field">
                        <input type="password" id="login-password" required />
                        <label for="login-password">Your password</label>
                    </div>
                    <button class="btn yellow darken-2 z-depth-0">Login</button>
                    <p class="error pink-text center-align"></p>
                </form>
            </div>
        </div>

        <!-- ACCOUNT MODAL -->
        <div id="modal-account" class="modal">
            <div class="modal-content center-align">
                <h4>Account details</h4>
                <br />
                <div class="account-details"></div>
            </div>
        </div>

        <!-- NEW PROJECT MODAL -->
        <div id="modal-new-project" class="modal">
            <div class="modal-content">
                <h4>New Project</h4>
                <br />
                <form id="project-form">
                    <div class="input-field">
                        <input type="text" id="name" required />
                        <label for="name">Project Name</label>
                    </div>
                    <div class="input-field">
                        <textarea
                            id="brief"
                            class="materialize-textarea"
                            required
                        ></textarea>
                        <label for="brief">Brief</label>
                    </div>
                    <div class="switch">
                        <label>
                            Private
                            <input type="checkbox" id="visibility" />
                            <span class="lever"></span>
                            Public
                        </label>
                    </div>
                    <button class="btn yellow darken-2 z-depth-0">
                        Create
                    </button>
                </form>
            </div>
        </div>

        <!-- CREATE STORY MODAL -->
        <div id="modal-create" class="modal">
            <div class="modal-content">
                <h4>Create Story</h4>
                <br />
                <form id="create-form">
                    <div class="input-field">
                        <input type="text" id="title" required />
                        <label for="title">Story Title</label>
                    </div>
                    <div class="input-field">
                        <textarea
                            id="persona"
                            class="materialize-textarea"
                            required
                        ></textarea>
                        <label for="persona">As a</label>
                    </div>
                    <div class="input-field">
                        <textarea
                            id="requirement"
                            class="materialize-textarea"
                            required
                        ></textarea>
                        <label for="requirement">I want to</label>
                    </div>
                    <div class="input-field">
                        <textarea
                            id="purpose"
                            class="materialize-textarea"
                            required
                        ></textarea>
                        <label for="purpose">so that I can</label>
                    </div>
                    <button class="btn yellow darken-2 z-depth-0">
                        Create
                    </button>
                </form>
            </div>
        </div>

        <!-- PRIVATE PROJECT LIST -->
        <div
            class="container private-project-container"
            style="margin-top: 40px; display: none;"
        >
            <h4 id="private-project-list-title">My Projects</h4>
            <div id="private-project-load-progress" class="progress">
                <div class="indeterminate"></div>
            </div>
            <!-- <ul
                class="collapsible z-depth-0 private-projects"
                style="border: none;"
            ></ul> -->
            <div class="row private-projects"></div>
        </div>

        <!-- PUBLIC PROJECT LIST -->
        <div
            class="container public-project-container"
            style="margin-top: 40px;"
        >
            <h4 id="public-project-list-title">Public Projects</h4>
            <div id="public-project-load-progress" class="progress">
                <div class="indeterminate"></div>
            </div>
            <ul
                class="collapsible z-depth-0 public-projects"
                style="border: none;"
            ></ul>
        </div>

        <!-- STORY LIST -->
        <div class="container" style="margin-top: 40px;">
            <h4 id="public-story-list-title">Public Stories</h4>
            <div id="public-story-load-progress" class="progress">
                <div class="indeterminate"></div>
            </div>
            <ul
                class="collapsible z-depth-0 stories"
                style="border: none;"
            ></ul>
        </div>

        <!-- GUIDE MODAL -->
        <div id="guide-modal" class="modal">
            <div class="modal-content">
                <h4>These are Project Cards</h4>
                <p>A bunch of text</p>
            </div>
            <div class="modal-footer">
                <a
                    href="#!"
                    class="modal-close waves-effect waves-green btn-flat"
                    >Okay</a
                >
            </div>
        </div>

        <script src="https://www.gstatic.com/firebasejs/7.14.3/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.14.3/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.14.3/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.14.3/firebase-functions.js"></script>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyD1CXVKf4KTtwkfOQfSCgkSzS-eVBYyWIM",
                authDomain: "agile-stories.firebaseapp.com",
                databaseURL: "https://agile-stories.firebaseio.com",
                projectId: "agile-stories",
            };
            firebase.initializeApp(config);

            // make auth and firestore references
            const auth = firebase.auth();
            const db = firebase.firestore();
            const functions = firebase.functions();
        </script>
        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script src="scripts/auth.js"></script>
        <script src="scripts/index.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                var elems = document.querySelectorAll(".sidenav");
                var options = {
                    edge: "left",
                    draggable: true,
                    inDuration: 250,
                    outDuration: 200,
                    onOpenStart: null,
                    onOpenEnd: null,
                    onCloseStart: null,
                    onCloseEnd: null,
                    preventScrolling: true,
                };
                var instances = M.Sidenav.init(elems, options);
            });
        </script>
        <script>
            if (!navigator.onLine) {
                console.log("OFFLINE");
                document.body.innerHTML = "<h4>OFFLINE</h4>";
                window.stop();
            }
        </script>
    </body>
</html>
